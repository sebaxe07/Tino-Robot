# Tino Robot - Control System

A comprehensive control system for Tino, a multi-component robot featuring a mobile base, articulated head, and leg mechanism.

## Project Overview

Tino Robot is built with a modular architecture consisting of three main Arduino-controlled components that communicate with a central Raspberry Pi:

- **Base**: Holonomic movement system with omni-directional wheels
- **Head**: Three-servo platform providing pan and tilt motion
- **Leg**: Single-actuator mechanism with encoded motion

The system provides real-time control via gamepad and includes video streaming capabilities through the Raspberry Pi camera.

## System Architecture

### Hardware Components

- **3× Arduino boards** - controlling base, head, and leg mechanisms
- **Raspberry Pi** - central controller and video streaming server
- **Motors and servos** - actuators for movement
- **Encoders** - position feedback for closed-loop control
- **Camera** - for video streaming
- **Gamepad** - user input device (Logitech Cordless RumblePad 2)

### Software Components

- **Arduino firmware** - PID control loops and motor control
- **Python controllers** - multiprocess serial communication and gamepad integration
- **Flask server** - live video streaming

## Directory Structure

```
base_tino/               # Arduino code for the base module
  ├── base_tino.ino      # Main base control loop
  ├── pinout.h           # Pin definitions for base
  └── RaspberryCommunication.*  # Serial comms library

head_OL_tino_base/       # Arduino code for the head module
  ├── head_OL_tino_base.ino
  └── RaspberryCommunication.*

leg_tino/                # Arduino code for the leg module
  ├── leg_tino.ino
  └── RaspberryCommunication.*

Tino-raspberrypi/        # Raspberry Pi control software
  ├── launcher.sh        # Script to start the robot software
  ├── main_camera.py     # Main entry point with camera support
  ├── classes/           # Controller classes
  ├── controller/        # Controller implementations
  ├── stream/            # Camera streaming code
  └── utils/             # Utilities and constants
```

## Setup Instructions

### Arduino Setup

1. Upload the appropriate sketch to each Arduino board:

   - `base_tino/base_tino.ino` to the base Arduino
   - `head_OL_tino_base/head_OL_tino_base.ino` to the head Arduino
   - `leg_tino/leg_tino.ino` to the leg Arduino

2. Connect each Arduino to the Raspberry Pi via USB

### Raspberry Pi Setup

1. Ensure Python environment is set up:

   ```
   source ~/etereum/bin/activate
   ```

2. Install required Python packages:

   - `serial`
   - `evdev`
   - `picamera2`
   - `flask`

3. Make launcher script executable:

   ```
   chmod +x launcher.sh
   ```

4. Connect the gamepad and camera to the Raspberry Pi

## Usage Instructions

1. Check the presence of the 4 batteries:

   - 1 for wheels and leg
   - 1 for head
   - 1 for the Raspberry Pi (Powerbank)
   - 1 for the Router (Powerbank)

2. Unplug all of the blue cables from the Raspberry Pi.

3. Connect all of the batteries and turn on all of the switches.

4. Connect via VSCode to the Raspberry Pi in SSH mode.

   4.1. Probably it will be usefull to download vscode in local via internet, then connet a cable ethernet al WAN del router [Do not disconnect any cable from the Raspberry Pi to the router] and reconnect via SSH.

5. Reconnect the blue USB cables to the Raspberry Pi.

6. Press the central button of the joystick to turn it on.

7. Run the launcher

8. Connet to the camera that is streaming with the instructions of the launcher.

9. To stop the execution ctrl + c in the terminal x2-3 times.

# SSH Connection

0. Connect to the network "reTino" password "earthbound"

1. Open VSCode

2. Connect to the remote SSH

   ```
   tino@192.168.0.101
   password: tino
   ```

3. Navigate to desktop -> Tino-raspberrypi

4. Write in the terminal the information of the launcher

   ```
   bash/home/Tine/Desktop/Tino-raspberry/launcher.sh
   ```

5. Done!

6. To view the camera stream, open a browser and go to:

   ```
   http://192.168.0.101:5000/video-feed
   ```

7. Control the robot.

## Communication Protocol

The Arduino modules and Raspberry Pi communicate using a simple serial protocol with key-value pairs:

- `BF`: Base Forward motion
- `BB`: Base angular (rotation) motion
- `HP`: Head Pitch
- `HX`: Head X-axis (pan)
- `HY`: Head Y-axis (tilt)

## Notes

- The watchdog timer is set to 100000ms for safety
- Different controllers available in the `classes` directory allow for specialized control configurations
- Serial baudrate is set to 115200 for all devices

## Software Dependencies

- Python 3
- picamera2
- Flask
- evdev
- pyserial
- ViRHas (Arduino library)
- Encoder (Arduino library)
- CytronMotorDriver (Arduino library)
- ezButton (Arduino library)

## Disclaimer

This README was automatically generated by GitHub Copilot based on the project structure and code analysis. It may not be entirely accurate or up-to-date. Please refer to the actual source code for the most reliable information.
