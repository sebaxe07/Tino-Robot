# Tino Robot - Control System

A comprehensive control system for Tino, a multi-component robot featuring a mobile base, articulated head, and leg mechanism.

## Project Overview

Tino Robot is built with a modular architecture consisting of three main Arduino-controlled components that communicate with a central Raspberry Pi:

- **Base**: Holonomic movement system with omni-directional wheels
- **Head**: Three-servo platform providing pan and tilt motion
- **Leg**: Single-actuator mechanism with encoded motion

The system provides real-time control via gamepad and includes video streaming capabilities through the Raspberry Pi camera.

## System Architecture

### Hardware Components

- **3× Arduino boards** - controlling base, head, and leg mechanisms
- **Raspberry Pi** - central controller and video streaming server
- **Motors and servos** - actuators for movement
- **Encoders** - position feedback for closed-loop control
- **Camera** - for video streaming
- **Gamepad** - user input device (Logitech Cordless RumblePad 2)

### Software Components

- **Arduino firmware** - PID control loops and motor control
- **Python controllers** - multiprocess serial communication and gamepad integration
- **Flask server** - live video streaming

## Directory Structure

```
base_tino/               # Arduino code for the base module
  ├── base_tino.ino      # Main base control loop
  ├── pinout.h           # Pin definitions for base
  └── RaspberryCommunication.*  # Serial comms library

head_OL_tino_base/       # Arduino code for the head module
  ├── head_OL_tino_base.ino
  └── RaspberryCommunication.*

leg_tino/                # Arduino code for the leg module
  ├── leg_tino.ino
  └── RaspberryCommunication.*

Tino-raspberrypi/        # Raspberry Pi control software
  ├── launcher.sh        # Script to start the robot software
  ├── main_camera.py     # Main entry point with camera support
  ├── classes/           # Controller classes
  ├── controller/        # Controller implementations
  ├── stream/            # Camera streaming code
  └── utils/             # Utilities and constants
```

## Setup Instructions

### Arduino Setup

1. Upload the appropriate sketch to each Arduino board:

   - `base_tino/base_tino.ino` to the base Arduino
   - `head_OL_tino_base/head_OL_tino_base.ino` to the head Arduino
   - `leg_tino/leg_tino.ino` to the leg Arduino

2. Connect each Arduino to the Raspberry Pi via USB

### Raspberry Pi Setup

1. Ensure Python environment is set up:

   ```
   source ~/etereum/bin/activate
   ```

2. Install required Python packages:

   - `serial`
   - `evdev`
   - `picamera2`
   - `flask`

3. Make launcher script executable:

   ```
   chmod +x launcher.sh
   ```

4. Connect the gamepad and camera to the Raspberry Pi

## Usage Instructions

1. Start the system by running:

   ```
   ./launcher.sh
   ```

2. Access the camera stream at:

   ```
   http://<raspberry-pi-ip>:5000/video_feed
   ```

3. Control the robot with the gamepad:
   - Left analog stick: Control head movement (HX, HY)
   - Right analog stick: Control base movement (BF, BB)
   - D-pad up/down: Control head pitch (HP)
   - Triggers: Control leg movement

## Communication Protocol

The Arduino modules and Raspberry Pi communicate using a simple serial protocol with key-value pairs:

- `BF`: Base Forward motion
- `BB`: Base angular (rotation) motion
- `HP`: Head Pitch
- `HX`: Head X-axis (pan)
- `HY`: Head Y-axis (tilt)

## Notes

- The watchdog timer is set to 100000ms for safety
- Different controllers available in the `classes` directory allow for specialized control configurations
- Serial baudrate is set to 115200 for all devices

## Software Dependencies

- Python 3
- picamera2
- Flask
- evdev
- pyserial
- ViRHas (Arduino library)
- Encoder (Arduino library)
- CytronMotorDriver (Arduino library)
- ezButton (Arduino library)

## Disclaimer

This README was automatically generated by GitHub Copilot based on the project structure and code analysis. It may not be entirely accurate or up-to-date. Please refer to the actual source code for the most reliable information.
